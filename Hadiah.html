<!DOCTYPE html>
<html>
<head>
  <style>
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      padding: 2rem;
      font-family: system-ui, sans-serif;
    }

    .wheel-container {
      position: relative;
      width: 300px;
      height: 300px;
    }

    .pointer {
      position: absolute;
      top: -1rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .pointer-dot {
      width: 1rem;
      height: 1rem;
      background-color: #1f2937;
      border-radius: 9999px;
      margin-bottom: 0.25rem;
    }

    .pointer-triangle {
  border-top: 12px solid transparent;
  border-bottom: 12px solid transparent;
  border-right: 24px solid #1f2937;
  transform: rotate(180deg);
    }

    .wheel {
      width: 100%;
      height: 100%;
      transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
    }

    .input-container {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      align-items: center;
      width: 100%;
      max-width: 20rem;
    }

    .code-input {
      width: 100%;
      padding: 0.5rem;
      text-align: center;
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
    }

    .spin-button {
      width: 100%;
      padding: 0.5rem 1rem;
      background-color: #2563eb;
      color: white;
      border: none;
      border-radius: 0.375rem;
      cursor: pointer;
    }

    .spin-button:disabled {
      background-color: #93c5fd;
      cursor: not-allowed;
    }

    .dialog {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 1.5rem;
      border-radius: 0.5rem;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      z-index: 50;
    }

    .dialog-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 40;
    }

    .dialog-title {
      font-size: 1.25rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .dialog-content {
      margin-bottom: 1rem;
    }

    .dialog-button {
      padding: 0.5rem 1rem;
      background-color: #2563eb;
      color: white;
      border: none;
      border-radius: 0.375rem;
      cursor: pointer;
      float: right;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="wheel-container">
      <div class="pointer">
        <div class="pointer-dot"></div>
        <div class="pointer-triangle"></div>
      </div>
      <svg class="wheel" viewBox="0 0 100 100">
        <!-- SVG content will be generated by JavaScript -->
      </svg>
    </div>

    <div class="input-container">
      <input type="text" class="code-input" placeholder="Enter code: 52552" maxlength="5">
      <button class="spin-button">Spin Now</button>
    </div>

    <div class="dialog-overlay"></div>
    <div class="dialog">
      <div class="dialog-title"></div>
      <div class="dialog-content"></div>
      <button class="dialog-button">OK</button>
    </div>
  </div>

  <script>
const prizes = [
  { name: "Try Again", color: "#f0f9ff", textColor: "#0369a1", probability: 0, url: "https://zestore.netlify.app" },
  { name: "$200", color: "#fee2e2", textColor: "#b91c1c", probability: 80, url: "https://zestore.netlify.app" },
  { name: "$100", color: "#fef3c7", textColor: "#92400e", probability: 3, url: "https://example.com/claim-100" },
  { name: "$50", color: "#ecfccb", textColor: "#3f6212", probability: 3, url: "https://example.com/claim-50" },
  { name: "$20", color: "#f3e8ff", textColor: "#7e22ce", probability: 3, url: "https://example.com/claim-20" },
  { name: "$10", color: "#ffedd5", textColor: "#9a3412", probability: 3, url: "https://example.com/claim-10" },
  { name: "$5", color: "#fce7f3", textColor: "#be185d", probability: 3, url: "https://example.com/claim-5" },
  { name: "$2", color: "#dbeafe", textColor: "#1d4ed8", probability: 2, url: "https://example.com/claim-2" }
];
    const VALID_CODE = "52552";
    let isSpinning = false;
    let spinCount = 0;

    // DOM elements
    const wheel = document.querySelector('.wheel');
    const spinButton = document.querySelector('.spin-button');
    const codeInput = document.querySelector('.code-input');
    const dialog = document.querySelector('.dialog');
    const dialogOverlay = document.querySelector('.dialog-overlay');
    const dialogTitle = document.querySelector('.dialog-title');
    const dialogContent = document.querySelector('.dialog-content');
    const dialogButton = document.querySelector('.dialog-button');

    // Generate wheel segments
    function generateWheel() {
      prizes.forEach((prize, index) => {
        const angle = (360 / prizes.length);
        const rotation = (angle * index);
        const startAngle = (rotation * Math.PI) / 180;
        const endAngle = ((rotation + angle) * Math.PI) / 180;
        const x1 = 50 + 50 * Math.cos(startAngle);
        const y1 = 50 + 50 * Math.sin(startAngle);
        const x2 = 50 + 50 * Math.cos(endAngle);
        const y2 = 50 + 50 * Math.sin(endAngle);
        
        const textRotation = rotation + angle / 2;
        const textX = 50 + 35 * Math.cos((textRotation * Math.PI) / 180);
        const textY = 50 + 35 * Math.sin((textRotation * Math.PI) / 180);

        const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
        
        // Create segment path
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("d", `M 50 50 L ${x1} ${y1} A 50 50 0 0 1 ${x2} ${y2} Z`);
        path.setAttribute("fill", prize.color);
        path.setAttribute("stroke", "#e5e7eb");
        path.setAttribute("stroke-width", "0.5");

        // Create text
        const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
        text.setAttribute("x", textX);
        text.setAttribute("y", textY);
        text.setAttribute("fill", prize.textColor);
        text.setAttribute("font-size", "4");
        text.setAttribute("font-weight", "bold");
        text.setAttribute("text-anchor", "middle");
        text.setAttribute("transform", `rotate(${textRotation + 90}, ${textX}, ${textY})`);
        text.textContent = prize.name;

        g.appendChild(path);
        g.appendChild(text);
        wheel.appendChild(g);
      });

      // Add center circle
      const centerCircle1 = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      centerCircle1.setAttribute("cx", "50");
      centerCircle1.setAttribute("cy", "50");
      centerCircle1.setAttribute("r", "6");
      centerCircle1.setAttribute("fill", "white");
      centerCircle1.setAttribute("stroke", "#e5e7eb");
      centerCircle1.setAttribute("stroke-width", "1");

      const centerCircle2 = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      centerCircle2.setAttribute("cx", "50");
      centerCircle2.setAttribute("cy", "50");
      centerCircle2.setAttribute("r", "4");
      centerCircle2.setAttribute("fill", "#f3f4f6");
      centerCircle2.setAttribute("stroke", "#e5e7eb");
      centerCircle2.setAttribute("stroke-width", "0.5");

      wheel.appendChild(centerCircle1);
      wheel.appendChild(centerCircle2);
    }

    function getRandomPrize() {
      const random = Math.random() * 100;
      let cumulativeProbability = 0;
      
      for (const prize of prizes) {
        cumulativeProbability += prize.probability;
        if (random <= cumulativeProbability) {
          return prize;
        }
      }
      return prizes[0];
    }

    function calculateRotationForPrize(prize, currentSpinCount) {
      const segmentSize = 360 / prizes.length;
      const prizeIndex = prizes.findIndex(p => p.name === prize.name);
      const targetRotation = -(segmentSize * prizeIndex + segmentSize / 2);
      const fullSpins = 5 * 360;
      return targetRotation - fullSpins - (currentSpinCount * 360);
    }

    function showDialog(result) {
      dialogTitle.textContent = result === "Try Again" ? "Better Luck Next Time!" : "Congratulations! ðŸŽ‰";
      dialogContent.textContent = result === "Try Again" ? 
        "Keep trying, you might win next time!" : 
        `You won ${result}!`;
        
        dialogButton.textContent = result === "Try Again" ? "OK" : "Claim Prize";
  dialogButton.onclick = () => {
    if ("Claim prize") {
      window.location.href (prizes.url); // Buka link hadiah di tab baru
    }
    hideDialog();
  };
        
      dialog.style.display = 'block';
      dialogOverlay.style.display = 'block';
    }

    function hideDialog() {
      dialog.style.display = 'none';
      dialogOverlay.style.display = 'none';
    }

    function handleSpin() {
      if (isSpinning) return;
      
      const code = codeInput.value;
      if (code !== VALID_CODE) {
        alert("Please enter the correct code: 52552");
        return;
      }

      isSpinning = true;
      spinButton.disabled = true;
      spinButton.textContent = 'Spinning...';

      const selectedPrize = getRandomPrize();
      spinCount++;
      const totalRotation = calculateRotationForPrize(selectedPrize, spinCount);
      wheel.style.transform = `rotate(${totalRotation}deg)`;

      setTimeout(() => {
        isSpinning = false;
        spinButton.disabled = false;
        spinButton.textContent = 'Spin Now';
        showDialog(selectedPrize.name);
      }, 5000);
    }

    // Event listeners
    spinButton.addEventListener('click', handleSpin);
    dialogButton.addEventListener('click', hideDialog);
    dialogOverlay.addEventListener('click', hideDialog);

    // Initialize wheel
    generateWheel();
  </script>
</body>
  </html>
