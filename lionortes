<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Chat Test</title>
</head>
<body>
  <input id="pertanyaan" placeholder="Tulis pertanyaan..." />
  <button onclick="kirimPertanyaan()">Kirim</button>
  <div id="chat"></div>

  <script>
    async function kirimPertanyaan() {
      const input = document.getElementById("pertanyaan");
      const chat = document.getElementById("chat");
      const teks = input.value.trim();

      if (!teks) return;

      chat.innerHTML += `<div><strong>Lo:</strong> ${teks}</div>`;

      try {
        const res = await fetch(`/.netlify/functions/ask?q=${encodeURIComponent(teks)}`);
        const data = await res.json();
        chat.innerHTML += `<div><strong>Lionor:</strong> ${data.answer}</div>`;
      } catch (e) {
        chat.innerHTML += `<div><strong>Error:</strong> Gagal fetch function</div>`;
      }

      input.value = '';
    }
  </script>
</body>
</html>
